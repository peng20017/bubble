/* Created by SongPeng on 17/10/27 */
$(document).ready(function() {
	function beginLoading(sourceImgs, loadingfn, loadingOverfn) {
		var index = 0;
		for(var i = 0; i < sourceImgs.length; i += 1) {
			var imgObj = new Image();
			imgObj.src = sourceImgs[i];
			imgObj.onload = function() {
				index += 1;
				var value = Math.ceil(index / sourceImgs.length * 100);
				loadingfn(value);
				if(index == sourceImgs.length) {
					loadingOverfn()
				}
			}
		}
	}
	var imgArr = ["img/bo-bg.png", "img/bo-per-1.png", "img/bo-per-2.png", "img/bo-per-3.png", "img/bo-per-4.png", "img/bo-header.png", "img/bo-icon.png", "img/bo-logo.png", "img/bo-bubble.png", "img/bo-adv-header.png", "img/bo-bobozan.png", "img/bo-cloud-1.png", "img/bo-cloud-2.png", "img/bo-code.png", "img/bo-font-1.png", "img/bo-font-2.png", "img/bo-gameDownload.png", "img/bo-star.png"];
	beginLoading(imgArr, progessfn, overfn);
	function progessfn(value) {}
	function overfn() {
		$(".figure").css("opacity", "1");
		$(".fontpng-1").css("opacity", "1").addClass('animated rotateInDownLeft');
		$(".fontpng-2").css("opacity", "1").addClass('animated rotateInDownRight');
		$("#figures-1").addClass('animated fadeInRight');
		$("#figures-2").addClass('animated fadeInLeft');
		$("#figures-3").addClass('animated zoomIn');
		$("#figures-4").addClass('animated fadeInDown');
		$(".gameDownload").addClass('animated pulse').animate({
			opacity: 1
		}, 2000, function() {
			var i = 1,
				bbw, bbl;
			var intever = setInterval(function() {
				var img = new Image();
				bbw = rand(5, 15) + "%";
				bbl = rand(0, 85) + "%";
				$(img).addClass("bo-bubble").attr("id", "bo-bubble" + i).attr("src", "img/bo-bubble.png").css({
					width: bbw,
					left: bbl
				}).animate({
					opacity:"1"
				}, 12,function(){
					$(this).animate({
						bottom:"110%"
					},3000,function(){
						$(this).remove();
					})
				});
				i += 1;
				$("#content").append(img)
			}, 300)
		})
	};
	$("#qq-btn").on("click", function() {
		$("#mask").slideDown("slow");
		$("#mask").one("click", function() {
			$(this).slideUp("slow")
		})
	});
	$(".cloud-1").animate({
		left: 0
	}, 30000);
	$(".cloud-2").animate({
		right: "0%"
	}, 30000);
	function rand(min, max) {
		return parseInt(Math.random() * (max - min + 1) + min)
	}
});